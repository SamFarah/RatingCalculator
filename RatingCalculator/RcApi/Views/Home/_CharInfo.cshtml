@model WowCharacterViewModel

<div class="row">
    <div style="width:106px">
        <img src="@Model.ThumbnailUrl" alt="@Model.Name" />
    </div>
    <div class="col-md-9">
        <div class="row">@Model.Name</div>
        <div class="row">&lt;@Model.Guild&gt;</div>
        <div class="row">(@Model.Region?.ToUpper()) @Model.Realm</div>
        <div class="row">@Model.Race @Model.ActiveSpec @Model.Class</div>
    </div>
</div>
<div class="row">
    <a href="@Model.ProfileUrl" target="_blank">Raider.io Profile</a>  <br />
    <small class="text-muted">Last update @Model.LastCrawledAt</small>
    Rating: @Model.Rating <br />
    Target Rating: @Model.TargetRating
    <br /><br />
    @if (Model.Rating >= Model.TargetRating)
    {
        <div class="alert alert-success">You already have that rating</div>
    }
    else
    {
        if ((Model.RunOptions?.Count ?? 0) == 0)
        {
            <span>WIP you cannot get to this target this week alone.. TODO: show min can be done this week to catch up</span>
        }
        else
        {
            <h5>Optios: </h5>
            var optionCounter = 0;
            @foreach (var runOption in Model.RunOptions)
            {
                <h6>
                    Option @(++optionCounter) @(optionCounter == 1 ? "(Fastest)" : optionCounter == Model.RunOptions?.Count ? "(Easiest)" :"")
                    
                    <small class="text-muted">Finish the following @(@runOption.Count == 1 ? "dungoen" : $"{@runOption.Count} dungeons") within the suggested timers (or faster) </small>
                </h6>
                
                <table class="table">
                    <thead>
                        <tr>
                            <th>Dungeon Name</th>
                            <th>Level</th>
                            <th>Affix</th>
                            <th>Time Limit</th>
                            <th>Complete In</th>
                            <th>Rating Adjust</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var run in runOption)
                        {
                            <tr>
                                <td>@run.DungeonName</td>
                                <td style="white-space:nowrap">
                                    @run.KeyLevel @for (var i = 0; i < run.PlussesCount; i++)
                                    {
                                        @Html.Raw("+")
                                    }
                                </td>
                                <td>
                                    <table>
                                        <tr>
                                            @foreach (var affix in run.Affixes)
                                            {
                                                <td>
                                                    <img src="@affix.IconUrl" alt="@affix.Name" title="@affix.Name" width="32" />
                                                </td>
                                            }
                                        </tr>
                                    </table>
                                </td>
                                <td>@run.TimeLimitString</td>
                                <td style="white-space:nowrap;text-align:center">@run.ClearTimeString<br /><span class="@(run.OverTime?"text-danger":"text-success")"> @(run.OverTime ? "over" : "under") by @run.OverUnderTime  </span></td>
                                <td>+@run.ScoreAdjust</td>
                            </tr>
                        }
                    </tbody>

                </table>
                <hr />
            }
        }

    }
</div>